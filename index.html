<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>همیاران جشن غدیر - ثبت زمان</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header id="sticky-header">
        <div class="container header-content">
            <div class="logo-area">
                <h1>همیاران جشن بزرگ غدیر</h1>
            </div>
            <!-- nav id="section-nav" حذف شد -->
            <div id="user-actions">
                <!-- دکمه ورود/ثبت نام و اطلاعات کاربر حذف شد -->
                <!-- دکمه پنل ادمین موقتا باقی می‌ماند تا دسترسی به آن حفظ شود، اما عملکردش تغییر خواهد کرد -->
                <button id="admin-panel-btn" style="display: none;">پنل ادمین (موقت)</button>
                <button id="finalize-btn" disabled>ثبت نهایی انتخاب‌ها</button>
            </div>
        </div>
    </header>

    <main class="container">
        <section id="welcome-message" class="content-section active-section">
            <h2>به سامانه ثبت زمان همیاران جشن غدیر خوش آمدید!</h2>
            <p>لطفاً در جداول زیر، زمان‌های مورد نظر خود را برای همکاری در بخش‌های مختلف مشخص نمایید.</p>
            <p>پس از انتخاب زمان‌ها، روی دکمه "ثبت نهایی انتخاب‌ها" در بالای صفحه کلیک کنید.</p>
        </section>

        <!-- جداول به صورت عمودی نمایش داده می‌شوند -->
        <section id="sakht-section" class="content-section time-table-section always-visible-section">
            <h2>بخش ساخت و آماده‌سازی</h2>
            <div id="sakht-table-container" class="table-container">
                <!-- جدول زمان‌بندی ساخت اینجا توسط جاوااسکریپت ایجاد می‌شود -->
            </div>
        </section>

        <section id="ejra-section" class="content-section time-table-section always-visible-section">
            <h2>بخش اجرا</h2>
            <div id="ejra-table-container" class="table-container">
                <!-- جدول زمان‌بندی اجرا اینجا توسط جاوااسکریپت ایجاد می‌شود -->
            </div>
        </section>

        <section id="jamavari-section" class="content-section time-table-section always-visible-section">
            <h2>بخش جمع آوری</h2>
            <div id="jamavari-table-container" class="table-container">
                <!-- جدول زمان‌بندی جمع آوری اینجا توسط جاوااسکریپت ایجاد می‌شود -->
            </div>
        </section>

        <!-- مودال جدید برای دریافت اطلاعات کاربر (نام، شماره تماس) -->
        <div id="user-data-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn" id="close-user-data-modal">×</span>
                <h3>ثبت اطلاعات جهت نهایی‌سازی</h3>
                <form id="user-data-form">
                    <label for="user-fullname-input">نام و نام خانوادگی: <span style="color:red;">*</span></label>
                    <input type="text" id="user-fullname-input" name="user-fullname-input" required>

                    <label for="user-phone-input">شماره تماس: <span style="color:red;">*</span> (مثال: 09123456789)</label>
                    <input type="tel" id="user-phone-input" name="user-phone-input" required pattern="09[0-9]{9}" title="شماره موبایل معتبر مانند 09123456789">
                    
                    <div class="feedback-message" id="user-data-feedback" style="display:none;"></div>
                    <button type="submit" id="submit-user-data-and-selections">ارسال و ثبت نهایی</button>
                </form>
            </div>
        </div>


        <!-- پنل ادمین بدون تغییر ساختاری باقی می‌ماند، اما عملکردش در JS تغییر می‌کند -->
        <section id="admin-panel-section" class="content-section" style="display:none;">
            <h2>پنل مدیریت</h2>
            <div class="admin-actions">
                <!-- دکمه تعریف کاربر جدید توسط ادمین حذف می‌شود چون سیستم ثبت‌نام تغییر کرده -->
                <!-- <button id="admin-add-user-btn">تعریف کاربر جدید</button> -->
                <button id="admin-view-all-users-btn">مشاهده لیست ثبت‌نام‌کنندگان</button>
                <button id="admin-view-aggregated-report-btn">گزارش تجمیعی حضور</button>
                <button id="logout-admin-btn" style="display:none; background-color: var(--danger-color);">خروج از پنل ادمین</button>
            </div>
            <div id="admin-content-area">
                <!-- محتوای بخش‌های مختلف ادمین اینجا نمایش داده می‌شود -->
            </div>
        </section>
    </main>

    <!-- مودال ورود ادمین (سابقاً auth-modal) -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-admin-login-modal">×</span>
            <div id="login-form-container"> <!-- از همین کانتینر برای فرم ورود ادمین استفاده می‌کنیم -->
                <h3>ورود به پنل مدیریت</h3>
                <form id="admin-login-form">
                    <label for="admin-login-username">نام کاربری ادمین:</label>
                    <input type="text" id="admin-login-username" name="admin-login-username" required value="admin">
                    <label for="admin-login-password">رمز عبور ادمین:</label>
                    <input type="password" id="admin-login-password" name="admin-login-password" required>
                    <div class="feedback-message" id="admin-login-feedback" style="display:none;"></div>
                    <button type="submit">ورود ادمین</button>
                </form>
            </div>
        </div>
    </div>

    <div id="loading-spinner" class="loading-spinner-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <div id="initial-welcome-overlay">
        <div class="welcome-text-container">
            <p>غدیر پروژه نیست؛ یک بیعت است!</p>
            <p>هر ساعتی که براش وقت می‌ذاری، داری می‌گی «لبیک یا علی».</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
